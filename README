To deploy elasticsearch locally you just need to:

  juju bootstrap
  juju deploy elasticsearch

To deploy on ec2 you need to specify a config file with your AWS access key and secret key which are used by
elasticsearch for discovery.  See the elastisearch on ec2 tutorial for more information:

see http://www.elasticsearch.org/tutorials/2011/08/22/elasticsearch-on-ec2.html

For instance in an elasticsearch.yaml config file you would have:

elasticsearch:
  access-key: Your_AWS_Access_Key
  secret-key: Your_AWS_Secret_Key

You can also set a region config parameter in this file if the us-east region is not the one you want to use for
discovery.  See the elasticache aws plugin documentation for more information:

https://github.com/elasticsearch/elasticsearch-cloud-aws

Once the unit has started you can test if everything's working by using curl as below to do a health check
which should give you a similar json response.

  $ curl -XGET 'http://<ec2 dns or ip of a node>:9200/_cluster/health?pretty=true'

  {
    "cluster_name" : "es-demo",
    "status" : "green",
    "timed_out" : false,
    "number_of_nodes" : 2,
    "number_of_data_nodes" : 2,
    "active_primary_shards" : 5,
    "active_shards" : 10,
    "relocating_shards" : 0,
    "initializing_shards" : 0,
    "unassigned_shards" : 0
  }
